1. 添加表 bm_business_category，用来限定商户所能查看的类目。

   ```sql
   CREATE TABLE `bm_business_category` (
     `business_id` varchar(20) DEFAULT NULL COMMENT '商户ID',
     `category_id` varchar(20) DEFAULT NULL COMMENT '类目ID'
   ) ENGINE=InnoDB DEFAULT CHARSET=utf8
   ```

2. 添加意向单跟进动态模板表。

  ```sql
  CREATE TABLE `om_dynamic_template` (
    `id` varchar(20) DEFAULT NULL COMMENT '主键ID',
    `name` varchar(30) NOT NULL COMMENT '模板名称',
    `describes` varchar(200) DEFAULT NULL COMMENT '模板描述',
    `business_id` varchar(20) DEFAULT NULL COMMENT '商户ID',
    `create_time` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    `update_time` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='意向单跟进节点模板'
  ```

  


3. 意向单跟进动态表添加 template_id 字段。

  ```sql
   ALTER TABLE om_dynamic ADD template_id VARCHAR(20)
  ```

4. 意向单表添加 template_id

```sql
  ALTER TABLE om_preorder ADD template_id VARCHAR(20)
```

5. 给每一个商户添加一个默认的模板

```sql
INSERT INTO om_dynamic_template (id,`name`,describes,business_id) VALUES (
'ID','默认模板','默认模板','商户ID'
);
```

6. 把 om_preorder 表中的 modify_time 字段更新去掉。

7. 更新动态表和意向单表

   ```sql
   -- 更新动态表的template_id 字段
   update om_dynamic set template_id = '模板ID' where business_id = '商户ID';
   
   -- 更新意向单表的template_id 字段
   update om_preorder set template_id = '模板ID' where business_id = '商户ID';
   ```

8. 把 om_preorder 表中的 modify_time 字段更新去掉。



